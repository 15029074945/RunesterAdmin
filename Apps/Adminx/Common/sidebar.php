<?php/* 获取侧边栏分类 */function getSideNavCate($pid=0,$selectid=0,$cate,$loop=0){	$Model = M("Nav");	$loop++;	$where['pid'] = array("eq",$pid);	$where['type'] = array("not in","page,url");	$where['cate'] = array("eq",$cate);	$order = "sort ASC,id ASC";	$vo = $Model->where($where)->order($order)->select();	if($vo){		if($loop ==1){			$get = I("get.");			//根据侧边栏pid显示项目高亮样式。			switch($get['pid']){				case "" :					$selectall = " class='click'";					$selectroot = "";					break;				case 0 :					$selectall = "";					$selectroot = " class='click'";					break;;			}			echo "<ul class='sideItemUl'>				<li><a href='".U($Think.CONTROLLER_NAME."/index","cate=".$cate)."' $selectall>所有</li></a>				<li><a href='".U($Think.CONTROLLER_NAME."/index?cate=$cate&pid=0&root=1")."' $selectroot>根分类</li></a>";		}		for($k=0;$k<$loop-1;$k++) $subclass ="subLi";		foreach($vo as $i => $vo){			if($vo['id'] == $selectid) $select = "click";			else $select ="";						echo "<li class='$subclass'><a href='" . U(CONTROLLER_NAME."/index?cate=".$cate."&pid={$vo['id']}") . "' class='$select' >{$vo['title']}</a></li>";			getSideNavCate($vo['id'],$selectid,$cate,$loop);		}	}}/* 获取用户节点侧边栏分类 */function getSideRuleCate($pid=0,$selectid=0,$loop=0,$sub=1){	$Model = M("AdminRuleCate");	$loop++;	$where = "pid = $pid";	$order = "sort ASC,id ASC";	$vo = $Model->where($where)->order($order)->select();	if($vo){		for($k=0;$k<$loop-1;$k++) $subclass ="subLi";		foreach($vo as $i => $vo){			if($vo['id'] == $selectid) $select = "click";			else $select ="";			echo "<li class='$subclass'><a href='" . U(CONTROLLER_NAME."/index?pid={$vo['id']}") . "' class='$select' >{$vo['title']}</a></li>";			if($sub == 1){				getSideRuleCate($vo['id'],$selectid,$loop);			}		}	}}/* 获取用户节点侧边栏分类 */function getSideCateTable($type,$mode="display",$selectid=0,$sub=1,$edit=1,$loop=0){	$Model = M("Category");	$loop++;	$where['cate_pid'] = $pid;	$where['cate_type'] = $type;	$order = "cate_sort ASC,cate_id ASC";	$vo = $Model->where($where)->order($order)->select();	if($vo){		//显示模式		if($mode == "display"){			for($k=0;$k<$loop-1;$k++) $subclass ="subLi";			foreach($vo as $i => $vo){				if($vo['cate_id'] == $selectid) $select = "click";				else $select ="";				echo "<li class='$subclass'><a href='" . U(CONTROLLER_NAME."/index?pid={$vo['cate_id']}") . "' class='$select' >{$vo['cate_title']}</a></li>";				if($sub == 1) getSideCateTable($type,$mode,$vo['cate_id'],$selectid,$sub,$edit,$loop);			}		} // mode if end		//编辑模式		elseif($mode == "edit"){			for($k=0;$k<$loop-1;$k++) $subclass ="subTr";			foreach($vo as $i => $vo){				$firmChar = "您确定要删除这个位置吗？如果该位置存在信息请先清空信息后再执行本操作。";				$firmUrl = U("Category/delete?id={$vo['cate_id']}");	        	echo "	            <tr class='$subclass'>	            <td class='numTd'>				<input type='hidden' value='{$vo['cate_id']}' name='iId[]' id='iId' />				<input type='text' class='numInput' maxlength='3' value='{$vo['cate_sort']}' onclick='this.select()' name='iSort{$vo['cate_id']}' /></td>	            <td><input type='text' class='NameInput' value='{$vo['cate_title']}' name='iName{$vo['cate_id']}' id='iName{$vo['cate_id']}' onkeydown='sideModifyActive(\"iName{$vo['cate_id']}\")' /></td>	            <td class='btnTd'>";	            if($edit == 1) echo "<a href='".U("Category/edit?id={$vo['cate_id']}")."' class='editBtn' title='编辑'></a>";	            echo "	            <a href='javascript:void(0)' class='delBtn' title='删除' onclick='isConfirm(\"$firmUrl\",\"$firmChar\")'></a></td>	            </tr>";				if($sub == 1) getSideCateTable($type,$mode,$vo['cate_id'],$selectid,$sub,$edit,$loop);				} // end foreach		} //mode if end	} // end if $vos	} //function end?>